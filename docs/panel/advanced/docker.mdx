# Panel in Docker
Pelican provides pre-built Docker images via GitHub Packages. `ghcr.io/pelican-dev/panel:latest` is the current latest release, and `ghcr.io/pelican-dev/panel:main` is built automatically from the current `main` branch. Deploying the panel in Docker is still a work in progress. While the plan is to make Docker the preferred installation method, we currently recommend the [standard deployment instructions](/docs/panel/getting-started)

This guide requires the Docker Engine and Docker CLI. (Docker Compose has been included in the Docker CLI since v2. Docker Compose v1 is unsupported.) If you need to install them, follow the [official install instructions](https://docs.docker.com/compose/install/).

## Basics
The easiest deployment method is using the standard compose.yml file.

This configuration includes an integrated web server that will automatically obtain SSL certificates if you are serving over HTTPS. For the database, it assumes you want to use SQLite (or you have an external database server to configure using the  installer.) It also assumes you intend to use the Filesystem driver for cache, session and queue (or you have an external Redis server to configure using the installer.) If you want to use other options built into Docker, see [Advanced Options](#advanced-options).

### Create compose.yml
```sh
mkdir -p pelican/panel
cd pelican/panel
nano compose.yml
```

Now, paste the following into the compose.yml file:

```yml
services:
  panel:
    image: ghcr.io/pelican-dev/panel:latest
    build: .
    restart: always
    networks:
      - default
    ports:
      - "80:80"
      - "443:443"
    extra_hosts:
      - "host.docker.internal:host-gateway"
    volumes:
      - pelican-data:/pelican-data
      - pelican-logs:/var/www/html/storage/logs
    environment:
        XDG_DATA_HOME: /pelican-data
        APP_URL: "http://localhost"
        ADMIN_EMAIL: "USEYOUROWNEMAILHERE@example.com"

volumes:
  pelican-data:
  pelican-logs:

networks:
  default:
    ipam:
      config:
        - subnet: 172.20.0.0/16
```

### Set Required Environment Variables
1. Set `APP_URL` to the base URL your server will be reachable on, including the protocol (https:// or http://) and port. 
    - Note that Caddy, the integrated webserver, will serve a 308 redirect to any requests on port 80 if the `APP_URL` begins with https://. If your final site will be reachable over HTTPS but SSL will be handled and terminated by an upstream server, such as a reverse proxy, you will need to use an [external webserver](#external-webserver) or a [custom caddyfile](#custom-caddyfile).
2. Set the `ADMIN_EMAIL` to your email address. Caddy will use this email address to generate a LetsEncrypt SSL certificate if you are serving using HTTPS.

Now, close and save changes to `compose.yml` by pressing `ctrl`+`x` then `enter`. 

### Start The Panel
From the directory in which the Caddyfile is located, run:

```sh
docker compose up
```

The panel will automatically restart if the container crashes or the host restarts. 

### Back Up Your Encryption Key


### Install
Now, head to the installer at `APP_URL/installer` to finish setting up the panel.

If you don't have an external database or redis server you want to use, select SQLite with the default location for your database, and Filesystem for cache, session and queue drivers. 

For other configuration, such as UI options, CAPTCHA, email, backups and OAuth, head to the settings menu in the admin panel.

### Stopping the Panel
If you need to non-destructively stop the panel for any reason, navigate back to the directory containing `compose.yml` and run:

```sh
docker compose down
```

### Uninstalling
:::danger
    **This will permanently delete the panel and all associated data** including the SQLite database and your encryption key.
:::
To uninstall the panel, navigate to the directory containing `compose.yml` and run:

```sh
docker compose rm -sv
```

## Advanced Options

### External Web Server

### Custom Caddyfile

### MySQL

### Redis

### Bind Mounts instead of Named Volumes

### Configuring with Environment Variables
Every setting from the installer and settings menu can be set with environment variables instead. This may be useful if you are automatically setting up your panel or setting up a staging environment. See [Environment Configuration](/docs/panel/advanced/environment) for a list of options. 

## Troubleshooting
